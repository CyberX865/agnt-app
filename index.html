<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>AGNT ‚Äî AI Agent Economy</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://unpkg.com/@tonconnect/ui@2.0.6/dist/tonconnect-ui.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700;800&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{--bg:#060a12;--bg2:#0b1120;--bg3:#111a2e;--card:#131d30;--card2:#182438;--bdr:#1a2740;--g:#00e5a0;--gd:rgba(0,229,160,.08);--gg:rgba(0,229,160,.2);--p:#a78bfa;--pd:rgba(167,139,250,.08);--b:#60a5fa;--bd:rgba(96,165,250,.08);--o:#fbbf24;--od:rgba(251,191,36,.08);--r:#f87171;--rd:rgba(248,113,113,.08);--t:#e2e8f0;--t2:#8b9dc3;--t3:#4a5f82}
html,body{background:var(--bg);color:var(--t);font-family:'DM Sans',sans-serif;height:100%;overflow:hidden}
.app{height:100%;display:flex;flex-direction:column}
.top{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:var(--bg2);border-bottom:1px solid var(--bdr);z-index:10}
.logo{display:flex;align-items:center;gap:7px}
.logo-i{width:30px;height:30px;border-radius:9px;background:linear-gradient(135deg,var(--g),#00a870);display:flex;align-items:center;justify-content:center;font-family:'DM Mono';font-weight:700;font-size:13px;color:#000;box-shadow:0 0 16px var(--gg)}
.logo-t{font-weight:700;font-size:17px;letter-spacing:-.3px}
.logo-tag{font-size:9px;color:var(--g);font-weight:600;background:var(--gd);padding:2px 5px;border-radius:3px;margin-left:3px}
.top-r{display:flex;align-items:center;gap:8px}
.notif{width:32px;height:32px;border-radius:10px;background:var(--bg3);border:1px solid var(--bdr);display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer;position:relative}
.notif-dot{position:absolute;top:5px;right:5px;width:6px;height:6px;border-radius:50%;background:var(--r);border:1.5px solid var(--bg3)}
.wbtn{display:flex;align-items:center;gap:5px;background:var(--gd);border:1px solid rgba(0,229,160,.15);color:var(--g);padding:6px 10px;border-radius:18px;font-size:12px;font-weight:500;cursor:pointer;font-family:'DM Mono'}
.wbtn.off{background:var(--bg3);border-color:var(--bdr);color:var(--t2)}
.wdot{width:5px;height:5px;border-radius:50%;background:var(--g);animation:pls 2s infinite}
.wbtn.off .wdot{background:var(--t3);animation:none}
@keyframes pls{0%,100%{opacity:1}50%{opacity:.3}}
.bal{display:flex;align-items:center;justify-content:space-between;padding:14px;background:var(--bg2);border-bottom:1px solid var(--bdr)}
.bal-n{font-family:'DM Mono';font-size:22px;font-weight:700;color:var(--g)}
.bal-s{font-size:13px;color:var(--t2);font-weight:500;margin-left:5px}
.bal-u{font-size:11px;color:var(--t3);font-family:'DM Mono';margin-top:1px}
.bacts{display:flex;gap:10px}
.ba{display:flex;flex-direction:column;align-items:center;gap:3px;cursor:pointer}
.ba:active{transform:scale(.92)}
.ba-i{width:38px;height:38px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:15px}
.ba-l{font-size:9px;color:var(--t3);font-weight:600}
.cnt{flex:1;overflow-y:auto;padding-bottom:72px}.cnt::-webkit-scrollbar{display:none}
.tabs{display:flex;gap:4px;padding:10px 14px;overflow-x:auto;scrollbar-width:none}.tabs::-webkit-scrollbar{display:none}
.tab{padding:6px 13px;border-radius:18px;font-size:12px;font-weight:500;white-space:nowrap;cursor:pointer;color:var(--t3);background:var(--bg3);border:1px solid transparent}.tab.on{color:var(--g);background:var(--gd);border-color:rgba(0,229,160,.12)}.tab:active{transform:scale(.95)}
.stats{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;padding:0 14px 10px}
.st{background:var(--card);border-radius:10px;padding:10px;border:1px solid var(--bdr)}
.st-l{font-size:9px;color:var(--t3);text-transform:uppercase;letter-spacing:.4px;font-weight:600}
.st-v{font-family:'DM Mono';font-size:15px;font-weight:700;margin-top:3px}
.st-c{font-size:9px;margin-top:1px;font-weight:500}.st-c.up{color:var(--g)}
.chart{margin:0 14px 10px;background:var(--card);border-radius:14px;padding:14px;border:1px solid var(--bdr)}
.ch-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.ch-pr{font-family:'DM Mono';font-size:18px;font-weight:700}
.ch-ch{font-size:11px;color:var(--g);font-weight:500}
.sec{padding:6px 14px;font-size:11px;color:var(--t3);font-weight:600;text-transform:uppercase;letter-spacing:.4px;display:flex;align-items:center;justify-content:space-between}
.sec-a{font-size:10px;color:var(--g);text-transform:none;letter-spacing:0;cursor:pointer}
.agsc{display:flex;gap:8px;padding:0 14px 14px;overflow-x:auto;scrollbar-width:none}.agsc::-webkit-scrollbar{display:none}
.agc{min-width:175px;background:var(--card);border-radius:14px;padding:12px;border:1px solid var(--bdr);cursor:pointer;position:relative;overflow:hidden}.agc:active{transform:scale(.97);background:var(--card2)}
.agc::before{content:'';position:absolute;top:0;left:0;right:0;height:2.5px;background:linear-gradient(90deg,var(--g),var(--b))}
.ag-top{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.ag-av{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:16px}
.ag-nm{font-size:13px;font-weight:600}.ag-cat{font-size:9px;color:var(--t3)}
.ag-st{display:flex;justify-content:space-between;margin-top:4px}
.ag-sv{font-family:'DM Mono';font-size:12px;font-weight:600}.ag-sl{font-size:8px;color:var(--t3);text-transform:uppercase}
.li{display:flex;align-items:center;gap:10px;padding:11px 14px;border-bottom:1px solid var(--bdr);cursor:pointer}.li:active{background:var(--bg3)}
.li-i{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0}
.li-m{flex:1;min-width:0}.li-t{font-size:13px;font-weight:500}
.li-s{font-size:11px;color:var(--t3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.li-r{text-align:right;flex-shrink:0}.li-v{font-family:'DM Mono';font-size:12px;font-weight:600}.li-v.pos{color:var(--g)}.li-v.neg{color:var(--r)}
.li-tm{font-size:9px;color:var(--t3)}
.nav{display:flex;position:fixed;bottom:0;left:0;right:0;background:var(--bg2);border-top:1px solid var(--bdr);padding:5px 0 max(env(safe-area-inset-bottom),6px);z-index:50}
.ni{flex:1;display:flex;flex-direction:column;align-items:center;gap:1px;padding:5px 0;cursor:pointer;color:var(--t3)}.ni.on{color:var(--g)}.ni:active{transform:scale(.88)}
.ni-i{font-size:18px}.ni-l{font-size:9px;font-weight:500}
.ov{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.65);backdrop-filter:blur(6px);z-index:150;display:none;align-items:flex-end}.ov.open{display:flex}
.md{background:var(--bg2);border-radius:20px 20px 0 0;width:100%;max-height:82vh;overflow-y:auto;padding:18px;border-top:1px solid var(--bdr);animation:su .25s ease}
@keyframes su{from{transform:translateY(100%)}to{transform:translateY(0)}}
.md-h{width:36px;height:3.5px;background:var(--bdr);border-radius:2px;margin:0 auto 14px}
.md h3{font-size:16px;font-weight:700;margin-bottom:3px}
.md p{font-size:12px;color:var(--t2);margin-bottom:14px}
.mf{margin-bottom:12px}
.ml{font-size:11px;color:var(--t3);font-weight:500;margin-bottom:3px;display:block}
.mi{width:100%;background:var(--bg3);border:1px solid var(--bdr);border-radius:10px;padding:10px 12px;color:var(--t);font-size:13px;outline:none;font-family:'DM Sans'}.mi:focus{border-color:var(--g)}.mi::placeholder{color:var(--t3)}
.ms{width:100%;background:var(--bg3);border:1px solid var(--bdr);border-radius:10px;padding:10px 12px;color:var(--t);font-size:13px;outline:none;font-family:'DM Sans';appearance:none}
.btn{width:100%;padding:13px;border:none;border-radius:12px;font-size:14px;font-weight:600;cursor:pointer;font-family:'DM Sans'}.btn:active{transform:scale(.98)}
.btn-g{background:linear-gradient(135deg,var(--g),#00a870);color:#000}
.btn-o{background:var(--bg3);border:1px solid var(--bdr);color:var(--t)}
.mc{font-size:11px;color:var(--t3);text-align:center;margin-top:6px}.mc span{color:var(--g);font-family:'DM Mono'}
.mx{display:block;text-align:center;font-size:12px;color:var(--t3);margin-top:10px;cursor:pointer}
.cp{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg);z-index:100;display:flex;flex-direction:column;transform:translateX(100%);transition:.25s ease}.cp.open{transform:translateX(0)}
.cp-h{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--bg2);border-bottom:1px solid var(--bdr)}
.cp-bk{font-size:18px;cursor:pointer;padding:4px;color:var(--t2)}
.cp-ai{flex:1}.cp-an{font-size:14px;font-weight:600}
.cp-as{font-size:10px;color:var(--g);display:flex;align-items:center;gap:3px}.cp-as::before{content:'';width:4px;height:4px;border-radius:50%;background:var(--g)}
.cp-co{font-family:'DM Mono';font-size:10px;color:var(--t3);background:var(--bg3);padding:3px 7px;border-radius:6px}
.cp-ms{flex:1;overflow-y:auto;padding:14px;display:flex;flex-direction:column;gap:8px}.cp-ms::-webkit-scrollbar{display:none}
.msg{max-width:82%;padding:9px 13px;border-radius:14px;font-size:13px;line-height:1.45;animation:mi .25s ease}
@keyframes mi{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.msg.u{background:var(--g);color:#000;align-self:flex-end;border-bottom-right-radius:3px;font-weight:500}
.msg.a{background:var(--card);border:1px solid var(--bdr);align-self:flex-start;border-bottom-left-radius:3px}
.msg.s{align-self:center;font-size:10px;color:var(--t3);background:none;padding:3px}
.cp-ia{display:flex;gap:7px;padding:8px 14px;background:var(--bg2);border-top:1px solid var(--bdr)}
.cp-in{flex:1;background:var(--bg3);border:1px solid var(--bdr);border-radius:18px;padding:9px 14px;color:var(--t);font-size:13px;outline:none;font-family:'DM Sans'}.cp-in:focus{border-color:var(--g)}.cp-in::placeholder{color:var(--t3)}
.cp-sn{width:36px;height:36px;border-radius:50%;border:none;background:var(--g);color:#000;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center}.cp-sn:active{transform:scale(.88)}
.typing{display:flex;gap:3px;padding:3px 6px;align-items:center}
.typing span{width:5px;height:5px;border-radius:50%;background:var(--t3);animation:tp 1.4s infinite}.typing span:nth-child(2){animation-delay:.2s}.typing span:nth-child(3){animation-delay:.4s}
@keyframes tp{0%,60%,100%{opacity:.3;transform:translateY(0)}30%{opacity:1;transform:translateY(-3px)}}
.ec{margin:6px 14px;background:var(--card);border-radius:14px;padding:14px;border:1px solid var(--bdr);display:flex;align-items:center;gap:12px;cursor:pointer}.ec:active{background:var(--card2)}
.ec-i{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.ec-m{flex:1}.ec-t{font-size:13px;font-weight:600}.ec-d{font-size:11px;color:var(--t3);margin-top:1px}
.ec-r{font-family:'DM Mono';font-size:13px;font-weight:600;color:var(--g);white-space:nowrap}
.ec-dn .ec-t,.ec-dn .ec-r{color:var(--t3);text-decoration:line-through}
.prog{height:4px;background:var(--bg3);border-radius:2px;margin:8px 14px;overflow:hidden}
.prog-b{height:100%;background:var(--g);border-radius:2px;transition:width .5s}
.toast{position:fixed;top:55px;left:50%;transform:translateX(-50%) translateY(-80px);background:var(--card);border:1px solid var(--g);color:var(--g);padding:9px 18px;border-radius:10px;font-size:12px;font-weight:500;z-index:200;transition:.25s;pointer-events:none;box-shadow:0 4px 16px rgba(0,229,160,.15);white-space:nowrap}
.toast.show{transform:translateX(-50%) translateY(0)}.toast.err{border-color:var(--r);color:var(--r)}
.search{margin:0 14px 8px;position:relative}
.search input{width:100%;background:var(--bg3);border:1px solid var(--bdr);border-radius:10px;padding:9px 12px 9px 34px;color:var(--t);font-size:13px;outline:none;font-family:'DM Sans'}.search input:focus{border-color:var(--g)}.search input::placeholder{color:var(--t3)}
.search-ic{position:absolute;left:11px;top:50%;transform:translateY(-50%);font-size:13px;color:var(--t3)}
.pg{display:none}.pg.on{display:block}
.chk{width:60px;height:60px;border-radius:50%;background:var(--gd);border:2px solid var(--g);display:flex;align-items:center;justify-content:center;font-size:28px;margin:0 auto 12px;animation:pop .3s}
@keyframes pop{from{transform:scale(0)}to{transform:scale(1)}}
.contract-info{margin:0 14px 10px;background:var(--card);border-radius:14px;padding:14px;border:1px solid var(--bdr)}
.ci-row{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid var(--bdr)}
.ci-row:last-child{border:none}
.ci-l{font-size:11px;color:var(--t3)}.ci-r{font-size:11px;font-family:'DM Mono';color:var(--t2)}
.ci-r.link{color:var(--g);cursor:pointer;text-decoration:underline}
</style>
</head>
<body>
<div class="app">
<div class="top">
  <div class="logo"><div class="logo-i">A</div><span class="logo-t">AGNT</span><span class="logo-tag">TON</span></div>
  <div class="top-r">
    <div class="notif" onclick="showM('notifs')">üîî<div class="notif-dot" id="nDot"></div></div>
    <div class="wbtn off" id="wBtn" onclick="connectWallet()"><span class="wdot"></span><span id="wTxt">Connect</span></div>
  </div>
</div>
<div class="bal">
  <div><div style="display:flex;align-items:baseline"><span class="bal-n" id="balN">0</span><span class="bal-s">AGNT</span></div><div class="bal-u" id="balU">Connect wallet to view balance</div></div>
  <div class="bacts">
    <div class="ba" onclick="showM('send')"><div class="ba-i" style="background:var(--gd);color:var(--g)">‚Üë</div><span class="ba-l">Send</span></div>
    <div class="ba" onclick="showM('receive')"><div class="ba-i" style="background:var(--pd);color:var(--p)">‚Üì</div><span class="ba-l">Receive</span></div>
    <div class="ba" onclick="showM('swap')"><div class="ba-i" style="background:var(--bd);color:var(--b)">‚áÑ</div><span class="ba-l">Swap</span></div>
    <div class="ba" onclick="showM('history')"><div class="ba-i" style="background:var(--od);color:var(--o)">üìã</div><span class="ba-l">History</span></div>
  </div>
</div>
<div class="cnt">
<div class="pg on" id="pgHome"><div id="homeC"></div></div>
<div class="pg" id="pgAgents"><div class="search"><span class="search-ic">üîç</span><input placeholder="Search agents..." oninput="fltAg(this.value)"></div><div class="tabs" id="agTabs"></div><div id="agList"></div><div style="padding:14px"><button class="btn btn-g" onclick="showM('deploy')">+ Deploy New Agent ‚Äî 250 AGNT</button></div></div>
<div class="pg" id="pgChat"><div style="padding:40px 20px;text-align:center"><div style="font-size:44px;margin-bottom:10px">üí¨</div><h3 style="font-size:17px;margin-bottom:6px">Recent Chats</h3><div id="rChats"></div><button class="btn btn-g" style="max-width:200px;margin:14px auto 0" onclick="sNav(1)">Browse Agents</button></div></div>
<div class="pg" id="pgEarn"><div style="padding:14px 14px 4px"><h3 style="font-size:17px">Earn AGNT</h3><p style="font-size:12px;color:var(--t2);margin-top:3px">Complete tasks to earn tokens</p></div><div style="padding:4px 14px;display:flex;justify-content:space-between;font-size:11px;color:var(--t3)"><span id="eprog"></span><span id="etot" style="color:var(--g)"></span></div><div class="prog"><div class="prog-b" id="ebar"></div></div><div id="eList"></div></div>
<div class="pg" id="pgProf"><div style="padding:18px 14px;text-align:center"><div style="width:56px;height:56px;border-radius:16px;background:linear-gradient(135deg,var(--g),var(--p));margin:0 auto 10px;display:flex;align-items:center;justify-content:center;font-size:24px">üë§</div><h3 style="font-size:16px" id="uName">-</h3><p style="font-size:11px;color:var(--t3);font-family:'DM Mono';margin-top:3px" id="uAddr">Connect wallet</p><div style="display:flex;gap:8px;justify-content:center;margin-top:10px"><button class="btn btn-o" style="width:auto;padding:7px 16px;font-size:12px" onclick="showM('editProf')">Edit Profile</button><button class="btn btn-o" style="width:auto;padding:7px 16px;font-size:12px" onclick="showM('settings')">Settings</button></div></div><div class="stats" id="pStats"></div><div class="sec"><span>Contract Info</span></div><div class="contract-info"><div class="ci-row"><span class="ci-l">Token</span><span class="ci-r">AGNT</span></div><div class="ci-row"><span class="ci-l">Decimals</span><span class="ci-r">9</span></div><div class="ci-row"><span class="ci-l">Total Supply</span><span class="ci-r">100,000,000</span></div><div class="ci-row"><span class="ci-l">Contract</span><span class="ci-r link" onclick="window.open('https://tonviewer.com/EQDLlyWDdDr9JQf-NIXsfJUGBINJ0eKNIYf1eKuWNN9aT-fc')">EQDLly...T-fc</span></div><div class="ci-row"><span class="ci-l">Network</span><span class="ci-r">TON Mainnet</span></div></div><div class="sec"><span>My Agents</span></div><div id="myAg"></div></div>
</div>
<div class="nav">
  <div class="ni on" onclick="sNav(0)"><span class="ni-i">üè†</span><span class="ni-l">Home</span></div>
  <div class="ni" onclick="sNav(1)"><span class="ni-i">ü§ñ</span><span class="ni-l">Agents</span></div>
  <div class="ni" onclick="sNav(2)"><span class="ni-i">üí¨</span><span class="ni-l">Chat</span></div>
  <div class="ni" onclick="sNav(3)"><span class="ni-i">üí∞</span><span class="ni-l">Earn</span></div>
  <div class="ni" onclick="sNav(4)"><span class="ni-i">üë§</span><span class="ni-l">Profile</span></div>
</div>
<div class="cp" id="cPanel"><div class="cp-h"><span class="cp-bk" onclick="cClose()">‚Üê</span><div class="cp-ai"><div class="cp-an" id="cpN"></div><div class="cp-as">Online ‚Äî AI Powered</div></div><div class="cp-co" id="cpC"></div></div><div class="cp-ms" id="cpM"></div><div class="cp-ia"><input class="cp-in" id="cpI" placeholder="Ask anything..." onkeydown="if(event.key==='Enter')cSend()"><button class="cp-sn" onclick="cSend()">‚Üë</button></div></div>
<div class="ov" id="ov" onclick="event.target===this&&cMod()"><div class="md"><div class="md-h"></div><div id="mdB"></div></div></div>
<div class="toast" id="toast"></div>
</div>
<script>
// ‚ïê‚ïê‚ïê REAL CONTRACT INFO ‚ïê‚ïê‚ïê
const CONTRACT='EQDLlyWDdDr9JQf-NIXsfJUGBINJ0eKNIYf1eKuWNN9aT-fc';
const SYMBOL='AGNT';
const DECIMALS=9;
const SUPPLY=100000000;

// ‚ïê‚ïê‚ïê TONCONNECT ‚ïê‚ïê‚ïê
let tonUI=null,wallet=null,userAddr='';
async function initTonConnect(){
  try{
    tonUI=new TON_CONNECT_UI.TonConnectUI({
      manifestUrl:'https://raw.githubusercontent.com/CyberX865/agnt-app/main/tonconnect-manifest.json',
      buttonRootId:null
    });
    tonUI.onStatusChange(w=>{
      wallet=w;
      if(w){
        userAddr=w.account.address;
        const short=userAddr.slice(0,4)+'...'+userAddr.slice(-4);
        document.getElementById('wTxt').textContent=short;
        document.getElementById('wBtn').classList.remove('off');
        document.getElementById('uAddr').textContent=short;
        document.getElementById('balU').textContent='Loading balance...';
        toast('üîó Wallet connected!');
        fetchBalance();
        if(window.Telegram&&Telegram.WebApp){
          const u=Telegram.WebApp.initDataUnsafe?.user;
          if(u)document.getElementById('uName').textContent=u.first_name||'User';
        }
      }else{
        document.getElementById('wTxt').textContent='Connect';
        document.getElementById('wBtn').classList.add('off');
        document.getElementById('balN').textContent='0';
        document.getElementById('balU').textContent='Connect wallet to view balance';
        document.getElementById('uName').textContent='-';
        document.getElementById('uAddr').textContent='Connect wallet';
        userAddr='';
      }
    });
  }catch(e){console.log('TonConnect init:',e)}
}
function connectWallet(){
  if(wallet){showM('wallet');return}
  if(tonUI)tonUI.openModal();
  else toast('TonConnect loading...',1);
}
async function fetchBalance(){
  try{
    const r=await fetch('https://tonapi.io/v2/accounts/'+userAddr+'/jettons');
    const d=await r.json();
    const j=d.balances?.find(b=>b.jetton?.address?.includes('LlyWDdDr9'));
    if(j){
      const raw=parseInt(j.balance||'0');
      bal=raw/Math.pow(10,DECIMALS);
      uBal();
    }else{document.getElementById('balU').textContent='0 AGNT found'}
  }catch(e){document.getElementById('balU').textContent='Balance check failed';console.log(e)}
}

// ‚ïê‚ïê‚ïê TELEGRAM SDK ‚ïê‚ïê‚ïê
function initTelegram(){
  if(window.Telegram&&Telegram.WebApp){
    const tg=Telegram.WebApp;
    tg.ready();
    tg.expand();
    tg.setHeaderColor('#060a12');
    tg.setBackgroundColor('#060a12');
    const u=tg.initDataUnsafe?.user;
    if(u)document.getElementById('uName').textContent=u.first_name||'User';
  }
}

// ‚ïê‚ïê‚ïê DATA ‚ïê‚ïê‚ïê
let bal=0;
const AG=[
{id:1,n:"TradingBot Pro",c:"Trading",i:"üìà",cl:"#00e5a0",p:.5,q:4820,rv:2410,rt:4.8,d:"Advanced TON/USDT technical analysis with entry/exit signals"},
{id:2,n:"DeFi Wizard",c:"DeFi",i:"üßô",cl:"#a78bfa",p:.3,q:3240,rv:972,rt:4.6,d:"Yield farming strategies and liquidity pool analysis"},
{id:3,n:"NFT Scout",c:"NFT",i:"üé®",cl:"#fbbf24",p:.8,q:1890,rv:1512,rt:4.7,d:"Discover undervalued NFT collections before they pump"},
{id:4,n:"Alpha Hunter",c:"Trading",i:"üéØ",cl:"#f87171",p:1,q:2100,rv:2100,rt:4.9,d:"Real-time whale tracking and alpha leak detection"},
{id:5,n:"Social Pulse",c:"Social",i:"üì°",cl:"#60a5fa",p:.2,q:5600,rv:1120,rt:4.5,d:"Telegram & Twitter sentiment for TON ecosystem"},
{id:6,n:"Gas Oracle",c:"Data",i:"‚õΩ",cl:"#00e5a0",p:.1,q:8900,rv:890,rt:4.3,d:"Optimal gas timing and network congestion predictions"},
{id:7,n:"Memecoin Radar",c:"Trading",i:"üê∏",cl:"#84cc16",p:.5,q:6200,rv:3100,rt:4.4,d:"Early detection of trending memecoins on TON DEXes"},
{id:8,n:"Portfolio AI",c:"DeFi",i:"üíº",cl:"#a78bfa",p:.4,q:2800,rv:1120,rt:4.7,d:"Personalized portfolio rebalancing and risk assessment"}];
const TX=[];
const TK=[
{i:"üëã",t:"Join Community",d:"Follow on Telegram & Twitter",r:100,dn:false},
{i:"üîó",t:"Connect Wallet",d:"Link your TON wallet",r:200,dn:false},
{i:"üí¨",t:"First AI Query",d:"Chat with any agent",r:50,dn:false},
{i:"ü§ñ",t:"Deploy an Agent",d:"Create your own AI agent",r:500,dn:false},
{i:"üì£",t:"Invite 3 Friends",d:"Share your referral link",r:300,dn:false},
{i:"üî•",t:"100 Queries",d:"Use agents 100 times",r:1000,dn:false},
{i:"üíé",t:"Diamond Hands",d:"Hold 10K AGNT for 7 days",r:2000,dn:false}];
const AI={
"TradingBot Pro":["üìä <b>TON/USDT Analysis:</b><br><br>Current price: $6.42<br>Support: $6.15 | Resistance: $6.80<br>RSI at 58 ‚Äî neutral bullish.<br><br>‚úÖ Accumulate $6.20-6.35, target $7.00","üêã <b>Whale Alert!</b> 2.4M TON bought on OKX. Expect 5-8% move in 24h."],
"DeFi Wizard":["üßô <b>Top Yield Farms:</b><br><br>1. STON.fi TON/USDT ‚Äî 42% APR<br>2. DeDust TON/SCALE ‚Äî 67% APR<br>3. Bemo stTON ‚Äî 5.8% APR"],
"NFT Scout":["üé® <b>Hot Collections:</b><br>1. TON Diamonds ‚Äî Floor +45%<br>2. Getgems Punks ‚Äî New utility<br>3. TON DNS ‚Äî 3-letter trending"],
"Alpha Hunter":["üéØ <b>Alpha:</b> New DEX launching ‚Äî ex-Uniswap team. 5% airdrop for early LPs."],
"Social Pulse":["üì° <b>Sentiment:</b> Telegram 78% bullish, Twitter trending #TONecosystem."],
"Gas Oracle":["‚õΩ <b>Gas:</b> Current 0.005 TON (Low). Best time: 02-06 UTC. Load: 34%."],
"Memecoin Radar":["üê∏ <b>Trending:</b> $TONDOG +340%, $JETTON +89% (24h). Take profits early."],
"Portfolio AI":["üíº <b>Health: 7.4/10</b><br>Good diversification. Move 15% memes ‚Üí stables for 8.2."]};
let cH={},cA=null,agF='All',agS='';

function uBal(){document.getElementById('balN').textContent=Math.floor(bal).toLocaleString();document.getElementById('balU').textContent='‚âà $'+(bal*.002).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}
function toast(m,e){const t=document.getElementById('toast');t.textContent=m;t.className='toast show'+(e?' err':'');setTimeout(()=>t.className='toast',2500)}
function fmt(n){return Math.abs(n)>999?Math.floor(n).toLocaleString():n}

const PG=['pgHome','pgAgents','pgChat','pgEarn','pgProf'];
function sNav(i){document.querySelectorAll('.ni').forEach((n,j)=>n.classList.toggle('on',j===i));PG.forEach((p,j)=>document.getElementById(p).classList.toggle('on',j===i));document.querySelector('.cnt').scrollTop=0;render()}
function render(){rHome();rAgL();rRC();rEarn();rProf()}

function rHome(){
  const c=document.getElementById('homeC');
  c.innerHTML='<div class="chart"><div class="ch-top"><div><div class="ch-pr">$0.002</div><div class="ch-ch">AGNT/USD</div></div><div style="font-size:10px;color:var(--t3)">Live</div></div><svg style="width:100%;height:70px" id="chSvg" viewBox="0 0 300 70" preserveAspectRatio="none"></svg></div>'
  +'<div class="contract-info"><div class="ci-row"><span class="ci-l">Contract</span><span class="ci-r link" onclick="window.open(\'https://tonviewer.com/'+CONTRACT+'\')">'+CONTRACT.slice(0,8)+'...'+CONTRACT.slice(-4)+'</span></div><div class="ci-row"><span class="ci-l">Supply</span><span class="ci-r">'+SUPPLY.toLocaleString()+' AGNT</span></div><div class="ci-row"><span class="ci-l">Network</span><span class="ci-r" style="color:var(--g)">TON Mainnet</span></div></div>'
  +'<div class="stats"><div class="st"><div class="st-l">Supply</div><div class="st-v">100M</div><div class="st-c up">AGNT</div></div><div class="st"><div class="st-l">Agents</div><div class="st-v">'+AG.length+'</div><div class="st-c up">Active</div></div><div class="st"><div class="st-l">Decimals</div><div class="st-v">9</div><div class="st-c up">TEP-74</div></div></div>'
  +'<div class="sec"><span>üî• AI Agents</span><span class="sec-a" onclick="sNav(1)">See All ‚Üí</span></div>'
  +'<div class="agsc">'+AG.slice(0,5).map(a=>'<div class="agc" onclick="cOpen('+a.id+')"><div class="ag-top"><div class="ag-av" style="background:'+a.cl+'22">'+a.i+'</div><div><div class="ag-nm">'+a.n+'</div><div class="ag-cat">'+a.c+' ¬∑ ‚≠ê'+a.rt+'</div></div></div><div class="ag-st"><div><div class="ag-sv">'+(a.q/1e3).toFixed(1)+'K</div><div class="ag-sl">Queries</div></div><div><div class="ag-sv" style="color:var(--g)">'+a.p+'</div><div class="ag-sl">AGNT/msg</div></div></div></div>').join('')+'</div>'
  +(TX.length?'<div class="sec"><span>‚ö° Activity</span></div>'+TX.slice(0,5).map(rTx).join(''):'');
  const pts=[];for(let i=0;i<30;i++)pts.push(60-Math.random()*40-i*1.2);
  const d=pts.map((y,i)=>(i===0?'M':'L')+(i*(300/29))+','+y).join(' ');
  document.getElementById('chSvg').innerHTML='<defs><linearGradient id="cg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--g)" stop-opacity=".25"/><stop offset="100%" stop-color="var(--g)" stop-opacity="0"/></linearGradient></defs><path d="'+d+' L300,70 L0,70 Z" fill="url(#cg)"/><path d="'+d+'" fill="none" stroke="var(--g)" stroke-width="1.5"/><circle cx="300" cy="'+pts[29]+'" r="3" fill="var(--g)"><animate attributeName="r" values="3;5;3" dur="2s" repeatCount="indefinite"/></circle>';
}
function rTx(tx){const ic={query:"üí¨",mint:"ü™ô",deploy:"üöÄ",send:"‚ÜóÔ∏è",receive:"‚ÜôÔ∏è",swap:"üîÑ"},bg={query:"var(--pd)",mint:"var(--gd)",deploy:"var(--bd)",send:"var(--od)",receive:"var(--gd)",swap:"var(--bd)"};return'<div class="li"><div class="li-i" style="background:'+(bg[tx.tp]||'var(--gd)')+'">'+ic[tx.tp]+'</div><div class="li-m"><div class="li-t">'+tx.t+'</div><div class="li-s">'+tx.s+'</div></div><div class="li-r"><div class="li-v '+(tx.a>0?'pos':'neg')+'">'+(tx.a>0?'+':'')+fmt(tx.a)+'</div><div class="li-tm">'+tx.tm+'</div></div></div>'}
function fltAg(v){agS=v.toLowerCase();rAgL()}
function rAgL(){
  document.getElementById('agTabs').innerHTML=['All','Trading','DeFi','NFT','Social','Data'].map(c=>'<div class="tab '+(agF===c?'on':'')+'" onclick="agF=\''+c+'\';rAgL()">'+c+'</div>').join('');
  let ls=AG.filter(a=>(agF==='All'||a.c===agF)&&(!agS||a.n.toLowerCase().includes(agS)||a.d.toLowerCase().includes(agS)));
  document.getElementById('agList').innerHTML=ls.length?ls.map(a=>'<div class="li" onclick="cOpen('+a.id+')"><div class="li-i" style="background:'+a.cl+'22;font-size:18px">'+a.i+'</div><div class="li-m"><div class="li-t">'+a.n+'</div><div class="li-s">'+a.d+'</div></div><div class="li-r"><div class="li-v" style="color:var(--g)">'+a.p+' AGNT</div><div class="li-tm">‚≠ê'+a.rt+'</div></div></div>').join(''):'<div style="padding:30px;text-align:center;color:var(--t3)">No agents found</div>'}
function cOpen(id){cA=AG.find(a=>a.id===id);if(!cA)return;document.getElementById('cpN').textContent=cA.n;document.getElementById('cpC').textContent=cA.p+' AGNT/msg';if(!cH[id])cH[id]=[{t:'s',x:'Connected to '+cA.n},{t:'a',x:cA.i+' Hey! I\'m <b>'+cA.n+'</b>. '+cA.d+'. How can I help?'}];rMs();document.getElementById('cPanel').classList.add('open')}
function cClose(){document.getElementById('cPanel').classList.remove('open')}
function rMs(){if(!cA)return;const el=document.getElementById('cpM');el.innerHTML=cH[cA.id].map(m=>'<div class="msg '+(m.t==='u'?'u':m.t==='a'?'a':'s')+'">'+m.x+'</div>').join('');el.scrollTop=el.scrollHeight}
function cSend(){if(!cA)return;const inp=document.getElementById('cpI'),tx=inp.value.trim();if(!tx)return;if(!wallet){toast('Connect wallet first',1);return}if(bal<cA.p){toast('Insufficient AGNT',1);return}inp.value='';cH[cA.id].push({t:'u',x:tx});bal-=cA.p;uBal();cH[cA.id].push({t:'s',x:'-'+cA.p+' AGNT ¬∑ tx confirmed ‚úì'});TX.unshift({tp:"query",t:'Query: '+cA.n,s:tx.slice(0,35),a:-cA.p,tm:"now"});rMs();const el=document.getElementById('cpM'),typ=document.createElement('div');typ.className='msg a';typ.innerHTML='<div class="typing"><span></span><span></span><span></span></div>';el.appendChild(typ);el.scrollTop=el.scrollHeight;setTimeout(()=>{el.removeChild(typ);const rs=AI[cA.n]||["Based on current data, I see interesting patterns. Want specifics?"];cH[cA.id].push({t:'a',x:rs[Math.floor(Math.random()*rs.length)]});rMs()},1200+Math.random()*1500)}
function rRC(){const ids=Object.keys(cH).map(Number);document.getElementById('rChats').innerHTML=ids.length?ids.map(id=>{const a=AG.find(x=>x.id===id);if(!a)return'';return'<div class="li" onclick="cOpen('+id+')" style="text-align:left"><div class="li-i" style="background:'+a.cl+'22;font-size:18px">'+a.i+'</div><div class="li-m"><div class="li-t">'+a.n+'</div><div class="li-s">'+cH[id].length+' messages</div></div></div>'}).join(''):'<p style="color:var(--t3);font-size:12px;margin:10px 0">No chats yet</p>'}
function rEarn(){const dn=TK.filter(t=>t.dn).length,er=TK.filter(t=>t.dn).reduce((s,t)=>s+t.r,0);document.getElementById('eprog').textContent=dn+'/'+TK.length+' completed';document.getElementById('etot').textContent=er+' AGNT earned';document.getElementById('ebar').style.width=(dn/TK.length)*100+'%';document.getElementById('eList').innerHTML=TK.map((t,i)=>'<div class="ec '+(t.dn?'ec-dn':'')+'" onclick="'+(t.dn?'':'doTask('+i+')')+'"><div class="ec-i" style="background:'+(t.dn?'var(--bg3)':'var(--gd)')+'">'+((t.dn?'‚úÖ':t.i))+'</div><div class="ec-m"><div class="ec-t">'+t.t+'</div><div class="ec-d">'+t.d+'</div></div><div class="ec-r">'+(t.dn?'Done':'+'+t.r)+'</div></div>').join('')}
function doTask(i){if(TK[i].dn)return;TK[i].dn=true;toast('üéâ Task completed!');rEarn()}
function rProf(){document.getElementById('pStats').innerHTML='<div class="st"><div class="st-l">Balance</div><div class="st-v" style="color:var(--g)">'+Math.floor(bal).toLocaleString()+'</div></div><div class="st"><div class="st-l">Agents</div><div class="st-v">'+AG.length+'</div></div><div class="st"><div class="st-l">Network</div><div class="st-v" style="font-size:12px">TON</div></div>';document.getElementById('myAg').innerHTML=AG.slice(0,3).map(a=>'<div class="li" onclick="cOpen('+a.id+')"><div class="li-i" style="background:'+a.cl+'22;font-size:16px">'+a.i+'</div><div class="li-m"><div class="li-t">'+a.n+'</div><div class="li-s">'+a.q+' queries ¬∑ '+a.rv+' AGNT</div></div><div class="li-r"><div class="li-v pos">+'+a.rv+'</div><div class="li-tm">Active ‚úì</div></div></div>').join('')}
function showM(t){
  const b=document.getElementById('mdB');
  if(t==='send'){if(!wallet){toast('Connect wallet first',1);return}b.innerHTML='<h3>üì§ Send AGNT</h3><p>Transfer tokens to any TON address</p><div class="mf"><label class="ml">Recipient</label><input class="mi" id="sTo" placeholder="EQA... or UQA..."></div><div class="mf"><label class="ml">Amount</label><input class="mi" id="sAmt" type="number" placeholder="0.00"><div style="font-size:10px;color:var(--t3);margin-top:3px">Available: <span style="color:var(--g)">'+bal.toLocaleString()+' AGNT</span></div></div><button class="btn btn-g" onclick="doSend()">Send via TonConnect</button><div class="mc">Sends Jetton transfer via wallet</div><span class="mx" onclick="cMod()">Cancel</span>';}
  else if(t==='receive'){b.innerHTML='<h3>üì• Receive AGNT</h3><p>Share your address to receive tokens</p><div style="background:var(--bg3);border:1px solid var(--bdr);border-radius:12px;padding:14px;text-align:center;margin-bottom:14px"><div style="font-family:\'DM Mono\';font-size:10px;color:var(--t2);word-break:break-all">'+(userAddr||CONTRACT)+'</div></div><button class="btn btn-g" onclick="navigator.clipboard.writeText(\''+(userAddr||CONTRACT)+'\');toast(\'üìã Address copied!\')">Copy Address</button><span class="mx" onclick="cMod()">Close</span>';}
  else if(t==='swap'){b.innerHTML='<h3>üîÑ Swap for AGNT</h3><p>Trade on STON.fi or DeDust</p><div style="background:var(--bg3);border:1px solid var(--bdr);border-radius:12px;padding:14px;margin-bottom:14px;text-align:center"><div style="font-size:13px;color:var(--t)">Buy AGNT on STON.fi DEX</div><div style="font-size:11px;color:var(--t3);margin-top:4px">Contract: '+CONTRACT.slice(0,12)+'...</div></div><button class="btn btn-g" onclick="window.open(\'https://app.ston.fi/swap?chartVisible=false&ft=TON&tt='+CONTRACT+'\')">Open STON.fi</button><div style="margin-top:8px"><button class="btn btn-o" onclick="window.open(\'https://dedust.io/swap/TON/'+CONTRACT+'\')">Open DeDust</button></div><span class="mx" onclick="cMod()">Close</span>';}
  else if(t==='history'){b.innerHTML='<h3>üìã Transactions</h3><p>View on explorer</p><button class="btn btn-g" onclick="window.open(\'https://tonviewer.com/'+(userAddr||CONTRACT)+'\')">View on TonViewer</button><div style="margin-top:8px"><button class="btn btn-o" onclick="window.open(\'https://tonscan.org/address/'+(userAddr||CONTRACT)+'\')">View on TonScan</button></div>'+(TX.length?'<div style="margin-top:14px">'+TX.map(rTx).join('')+'</div>':'')+'<span class="mx" onclick="cMod()">Close</span>';}
  else if(t==='deploy'){b.innerHTML='<h3>ü§ñ Deploy Agent</h3><p>Create an AI agent on AGNT platform</p><div class="mf"><label class="ml">Agent Name</label><input class="mi" id="dName" placeholder="e.g. DeFi Analyzer"></div><div class="mf"><label class="ml">Category</label><select class="ms" id="dCat"><option>Trading</option><option>DeFi</option><option>NFT</option><option>Social</option><option>Data</option></select></div><div class="mf"><label class="ml">Price Per Query (AGNT)</label><input class="mi" id="dPrice" type="number" step="0.1" placeholder="0.5"></div><button class="btn btn-g" onclick="doDeploy()">üöÄ Deploy Agent</button><div class="mc">Fee: <span>250 AGNT</span></div><span class="mx" onclick="cMod()">Cancel</span>';}
  else if(t==='wallet'){b.innerHTML='<h3>üëõ Wallet</h3><p>Connected via TonConnect</p><div class="contract-info"><div class="ci-row"><span class="ci-l">Address</span><span class="ci-r">'+userAddr.slice(0,8)+'...'+userAddr.slice(-6)+'</span></div><div class="ci-row"><span class="ci-l">AGNT Balance</span><span class="ci-r" style="color:var(--g)">'+Math.floor(bal).toLocaleString()+'</span></div><div class="ci-row"><span class="ci-l">Network</span><span class="ci-r">TON Mainnet</span></div></div><button class="btn btn-g" onclick="navigator.clipboard.writeText(\''+userAddr+'\');toast(\'üìã Copied!\')">Copy Address</button><div style="margin-top:8px"><button class="btn btn-o" onclick="window.open(\'https://tonviewer.com/'+userAddr+'\')">View on Explorer</button></div><div style="margin-top:8px"><button class="btn btn-o" style="color:var(--r)" onclick="if(tonUI)tonUI.disconnect();cMod()">Disconnect</button></div><span class="mx" onclick="cMod()">Close</span>';}
  else if(t==='editProf'){b.innerHTML='<h3>‚úèÔ∏è Edit Profile</h3><div class="mf"><label class="ml">Display Name</label><input class="mi" id="eName" placeholder="Your name"></div><button class="btn btn-g" onclick="document.getElementById(\'uName\').textContent=document.getElementById(\'eName\').value||\'-\';toast(\'‚úÖ Updated\');cMod()">Save</button><span class="mx" onclick="cMod()">Cancel</span>';}
  else if(t==='settings'){b.innerHTML='<h3>‚öôÔ∏è Settings</h3><div class="li" onclick="toast(\'üîî Notifications on\')"><div class="li-i" style="background:var(--gd)">üîî</div><div class="li-m"><div class="li-t">Notifications</div></div><div class="li-r" style="color:var(--g);font-size:12px">On</div></div><div class="li" onclick="window.open(\'https://tonviewer.com/'+CONTRACT+'\')"><div class="li-i" style="background:var(--bd)">üìú</div><div class="li-m"><div class="li-t">View Contract</div><div class="li-s">'+CONTRACT.slice(0,20)+'...</div></div></div><div class="li" onclick="toast(\'v1.0.0\')"><div class="li-i" style="background:var(--pd)">‚ÑπÔ∏è</div><div class="li-m"><div class="li-t">App Version</div><div class="li-s">AGNT MiniApp v1.0.0</div></div></div><span class="mx" onclick="cMod()">Close</span>';}
  else if(t==='notifs'){document.getElementById('nDot').style.display='none';b.innerHTML='<h3>üîî Notifications</h3>'+['üêã Whale Alert|Large TON movement detected|1m','üìà AGNT|Token live on mainnet|5m','ü§ñ Platform|8 AI agents active|10m','üíé Supply|100M AGNT minted|1h'].map(n=>{const p=n.split('|');return'<div class="li"><div class="li-i" style="background:var(--gd)">'+p[0].split(' ')[0]+'</div><div class="li-m"><div class="li-t">'+p[0]+'</div><div class="li-s">'+p[1]+'</div></div><div class="li-r"><div class="li-tm">'+p[2]+'</div></div></div>'}).join('')+'<span class="mx" onclick="cMod()">Close</span>';}
  document.getElementById('ov').classList.add('open');
}
function cMod(){document.getElementById('ov').classList.remove('open')}
function doSend(){
  const to=document.getElementById('sTo')?.value?.trim(),amt=parseFloat(document.getElementById('sAmt')?.value);
  if(!to){toast('Enter address',1);return}if(!amt||amt<=0){toast('Enter amount',1);return}
  toast('üì§ Opening wallet to confirm...');cMod();
  // In production this would create a Jetton transfer message via TonConnect
}
function doDeploy(){
  const name=document.getElementById('dName')?.value?.trim()||'My Agent';
  const cat=document.getElementById('dCat')?.value||'Trading';
  const price=parseFloat(document.getElementById('dPrice')?.value)||0.5;
  const icons={Trading:"üìà",DeFi:"üßô",NFT:"üé®",Social:"üì°",Data:"üìä"};
  AG.push({id:AG.length+1,n:name,c:cat,i:icons[cat]||"ü§ñ",cl:"#00e5a0",p:price,q:0,rv:0,rt:5.0,d:"Custom agent"});
  cMod();toast('üöÄ '+name+' deployed!');render();
}

// ‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê
render();initTelegram();initTonConnect();
</script>
</body>
</html>